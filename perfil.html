<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Perfil do Usuário</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body class="bg-green-600">
    <div class="min-h-screen flex flex-col">
      <!-- Header -->
      <header class="p-4 bg-nubank text-white">
        <div class="flex justify-between items-center">
          <div class="flex items-center">
            <!-- Botão do perfil -->
            <button
              onclick="window.location.href = 'index1.html';"
              class="p-2 bg-perfil rounded-full relative"
            >
              <!-- Ícone de perfil ou foto -->
              <div
                id="fotoPerfilContainer"
                class="h-12 w-12 rounded-full bg-cover bg-center flex items-center justify-center"
              >
                <!-- Ícone de perfil (ícone de usuário) -->
                <svg
                  id="iconePerfil"
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-6 w-6 text-white"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                  />
                </svg>
              </div>
            </button>
            <h1 id="mensagemBoasVindas" class="text-sm font-semibold ml-4">
              Editar Perfil
            </h1>
          </div>
        </div>
      </header>

      <!-- Conteúdo principal -->
      <main class="p-4">
        <!-- Funcionalidades (Rolagem Horizontal) -->
        <div class="mt-6 overflow-x-auto scroll-horizontal px-4">
          <div class="flex space-x-2 w-max">
            <!-- Adicionar Foto -->
            <button
              onclick="document.getElementById('inputFotoPerfil').click()"
              class="flex flex-col items-center w-16"
            >
              <div
                class="bg-gray-100 p-3 rounded-full flex items-center justify-center"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-5 w-5 text-green-600"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"
                  />
                </svg>
              </div>
              <span class="mt-2 text-xs text-white">Adicionar</span>
            </button>

            <!-- Salvar Foto -->
            <button
              onclick="salvarFotoPerfil()"
              class="flex flex-col items-center w-16"
            >
              <div
                class="bg-gray-100 p-3 rounded-full flex items-center justify-center"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-5 w-5 text-blue-600"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"
                  />
                </svg>
              </div>
              <span class="mt-2 text-xs text-white">Salvar</span>
            </button>

            <!-- Remover Foto -->
            <button
              onclick="removerFotoPerfil()"
              class="flex flex-col items-center w-16"
            >
              <div
                class="bg-gray-100 p-3 rounded-full flex items-center justify-center"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-5 w-5 text-red-600"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                  />
                </svg>
              </div>
              <span class="mt-2 text-xs text-white">Remover</span>
            </button>

            <!-- Voltar -->
            <button
              onclick="window.location.href = 'index1.html';"
              class="flex flex-col items-center w-16"
            >
              <div
                class="bg-gray-100 p-3 rounded-full flex items-center justify-center"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-5 w-5 text-gray-600"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M10 19l-7-7m0 0l7-7m-7 7h18"
                  />
                </svg>
              </div>
              <span class="mt-2 text-xs text-white">Voltar</span>
            </button>
          </div>
        </div>

        <!-- Mensagem de sucesso -->
        <div
          id="mensagemSucesso"
          class="hidden mt-2 p-2 bg-green-100 border border-green-400 text-green-700 rounded-md text-sm"
        >
          Foto salva com sucesso!
        </div>

        <!-- Input oculto para selecionar a foto -->
        <input
          type="file"
          id="inputFotoPerfil"
          accept="image/*"
          class="hidden"
        />
      </main>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        // Verifica se há uma foto de perfil salva no localStorage
        const fotoPerfilSalva = localStorage.getItem('fotoPerfil');
        const fotoPerfilContainer = document.getElementById('fotoPerfilContainer');
        const iconePerfil = document.getElementById('iconePerfil');

        if (fotoPerfilSalva && fotoPerfilContainer && iconePerfil) {
          // Se houver uma foto salva, exibe-a no lugar do ícone
          fotoPerfilContainer.style.backgroundImage = `url(${fotoPerfilSalva})`;
          iconePerfil.classList.add('hidden'); // Oculta o ícone de perfil
        }

        // Configura o input de arquivo para carregar a foto
        const inputFotoPerfil = document.getElementById('inputFotoPerfil');
        if (inputFotoPerfil) {
          inputFotoPerfil.addEventListener('change', function (event) {
            const file = event.target.files[0];
            if (file) {
              const reader = new FileReader();
              reader.onload = function (e) {
                // Exibe a foto no container
                if (fotoPerfilContainer) {
                  fotoPerfilContainer.style.backgroundImage = `url(${e.target.result})`;
                }
                if (iconePerfil) {
                  iconePerfil.classList.add('hidden'); // Oculta o ícone de perfil
                }
                // Salva a foto temporariamente (aguardando confirmação)
                localStorage.setItem('fotoPerfilTemp', e.target.result);
              };
              reader.readAsDataURL(file);
            }
          });
        }
      });

      // Função para salvar a foto de perfil
      function salvarFotoPerfil() {
        const fotoTemp = localStorage.getItem('fotoPerfilTemp');
        if (fotoTemp) {
          localStorage.setItem('fotoPerfil', fotoTemp); // Salva a foto permanentemente
          localStorage.removeItem('fotoPerfilTemp'); // Remove a foto temporária
          // Exibe a mensagem de sucesso
          const mensagemSucesso = document.getElementById('mensagemSucesso');
          if (mensagemSucesso) {
            mensagemSucesso.classList.remove('hidden');
            setTimeout(() => {
              mensagemSucesso.classList.add('hidden');
            }, 3000); // Oculta a mensagem após 3 segundos
          }
        } else {
          alert('Nenhuma foto selecionada.');
        }
      }

      // Função para remover a foto de perfil
      function removerFotoPerfil() {
        localStorage.removeItem('fotoPerfil'); // Remove a foto do localStorage
        localStorage.removeItem('fotoPerfilTemp'); // Remove a foto temporária
        const fotoPerfilContainer = document.getElementById('fotoPerfilContainer');
        const iconePerfil = document.getElementById('iconePerfil');

        if (fotoPerfilContainer) {
          fotoPerfilContainer.style.backgroundImage = ''; // Remove a foto do container
        }
        if (iconePerfil) {
          iconePerfil.classList.remove('hidden'); // Exibe o ícone de perfil novamente
        }
      }
    </script>
  </body>
</html>